{"version":3,"sources":["components/axios.js","components/StateProvider.js","components/Chat.js","components/SidebarChat.js","components/Sidebar.js","firebase.js","components/reducer.js","components/Login.js","App.js","index.js"],"names":["instance","axios","create","baseURL","StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","Chat","messages","useState","seed","setSeed","input","setInput","user","sendMessage","e","a","preventDefault","post","message","name","displayName","timestamp","Date","toUTCString","received","useEffect","Math","floor","random","className","Avatar","src","length","IconButton","SearchOutlined","AttachFile","MoreVert","map","InsertEmoticon","onChange","target","type","placeholder","onClick","Mic","SidebarChat","Sidebar","photoURL","auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","provider","GoogleAuthProvider","actionTypes","state","action","console","log","Login","dispatch","alt","Button","signInWithPopup","then","result","catch","error","alert","App","setMessages","get","res","data","channel","Pusher","cluster","subscribe","bind","unbind_all","unsubscribe","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.af268f16.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst instance = axios.create({\r\n    baseURL : \"https://whatsappcloneserver.herokuapp.com\"\r\n})\r\n\r\nexport default instance","import React,  { createContext, useContext, useReducer } from \"react\";\r\n\r\n\r\nexport const StateContext = createContext()\r\n\r\nexport const StateProvider = ({ reducer, initialState , children}) => (\r\n    <StateContext.Provider value = { useReducer(reducer,initialState)}>\r\n    {children}\r\n    </StateContext.Provider>\r\n)\r\n\r\nexport const useStateValue = () => useContext(StateContext)","import { Avatar,IconButton } from '@material-ui/core'\r\nimport {AttachFile,MoreVert,SearchOutlined,InsertEmoticon,Mic} from '@material-ui/icons'\r\nimport React, { useEffect, useState } from 'react'\r\nimport './Chat.css'\r\nimport axios from './axios'\r\nimport { useStateValue } from './StateProvider'\r\n\r\n\r\nconst Chat = ({ messages}) => {\r\n\r\n    const [seed,setSeed]= useState(\"\")\r\nconst [input,setInput] = useState(\"\")\r\nconst [{user}, dispatch] = useStateValue()\r\n\r\n\r\nconst sendMessage = async (e) =>{\r\n    e.preventDefault();\r\n    await axios.post('/messages/new',{\r\n        message:input,\r\n        name:user.displayName,\r\n        timestamp: new Date().toUTCString(),\r\n        received:true\r\n    })\r\n  setInput(\"\")\r\n}\r\n\r\nuseEffect(() => {\r\n   setSeed(Math.floor(Math.random() * 5000))\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <div className='chat'>\r\n            <div className='chat_header'>\r\n            <Avatar src={`https://avatars.dicebar.com/api/human/b${seed}.svg`}/>\r\n            <div className='chat_headerInfo'>\r\n             \r\n             <h3>Fun Pandrom</h3>\r\n             <p>Last Seen {\" \"}\r\n             {messages[messages.length -1]?.timestamp}\r\n             </p>\r\n            </div>\r\n\r\n            <div className='chat_headerRight'>\r\n\r\n           <IconButton>\r\n               <SearchOutlined />\r\n               </IconButton>\r\n               <IconButton>\r\n               <AttachFile />\r\n               </IconButton>\r\n               <IconButton>\r\n               <MoreVert />\r\n               </IconButton>\r\n\r\n            </div>\r\n            </div>\r\n            <div className='chat_body'>\r\n             \r\n            {messages.map(message => (\r\n\r\n                <p className={`chat_message  ${message.name === user.displayName && 'chat_receiver'}`}>\r\n                    <span className='chat_name'>{message.name}</span>\r\n                    {message.message}\r\n                    <span className='chat_timestamp'>\r\n                  {message.timestamp}\r\n                    </span>\r\n                </p>\r\n            ))}\r\n            </div>\r\n            <div className='chat_footer'>\r\n            <InsertEmoticon/>\r\n<form>\r\n    <input value={input} onChange={e => setInput(e.target.value)} type=\"text\" placeholder='Type a message' />\r\n    <button onClick={sendMessage} type='submit'>Send a msg</button>\r\n</form>\r\n\r\n<Mic/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n","import { Avatar } from '@material-ui/core'\r\nimport React, { useEffect, useState } from 'react'\r\nimport './SidebarChat.css'\r\n\r\n\r\nconst SidebarChat = ({messages}) => {\r\n\r\nconst [seed,setSeed]= useState(\"\")\r\n\r\n\r\nuseEffect(() => {\r\n   setSeed(Math.floor(Math.random() * 5000))\r\n    }, [])\r\n\r\n    return (\r\n        <div className='sidebarChat'>\r\n            <Avatar src={`https://avatars.dicebar.com/api/human/b${seed}.svg`}/>\r\n            <div className='sidebarChat_info'>\r\n             \r\n             <h3>Fun Pandrom</h3>\r\n             <p>\r\n             {messages[messages.length -1]?.message}\r\n             </p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SidebarChat\r\n","import React from 'react'\r\nimport './Sidebar.css'\r\nimport {Avatar,IconButton} from '@material-ui/core'\r\nimport {SearchOutlined} from '@material-ui/icons'\r\nimport DonutLargeIcon  from '@material-ui/icons/DonutLarge'\r\nimport ChatIcon from '@material-ui/icons/Chat'\r\nimport  MoreVertIcon  from '@material-ui/icons/MoreVert'\r\nimport SidebarChat from './SidebarChat'\r\nimport { useStateValue } from './StateProvider'\r\n\r\n\r\nconst Sidebar = ({messages}) => {\r\n\r\n    const [{user}, dispatch] = useStateValue()\r\n    return (\r\n        <div className='sidebar'>\r\n            <div className='sidebar_header'>\r\n            <Avatar src={user?.photoURL}/>\r\n            <div className='sidebar_headerRight'>\r\n             <IconButton>\r\n                 <DonutLargeIcon />\r\n             </IconButton>\r\n             <IconButton>\r\n                 <ChatIcon />\r\n             </IconButton>\r\n             <IconButton>\r\n                 <MoreVertIcon />\r\n             </IconButton>\r\n              </div>\r\n            </div>\r\n            <div className='sidebar_search'>\r\n                <div className='sidebar_searchContainer'>\r\n                    <SearchOutlined/>\r\n                    <input type=\"text\" placeholder='Search or start new chat'/>\r\n                </div>\r\n            </div>\r\n            <div className='sidebar_chats'>\r\n                <SidebarChat messages={messages} />\r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar\r\n","import firebase from 'firebase/compat/app';\r\nimport 'firebase/compat/auth';\r\nimport 'firebase/compat/storage';\r\nimport 'firebase/compat/database';\r\nimport 'firebase/compat/firestore';\r\n\r\n\r\n\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyAx7TK0TR24uu0lWaDklc5c2ydEyWBgkGw\",\r\n    authDomain: \"whatsapp-mern-5147c.firebaseapp.com\",\r\n    projectId: \"whatsapp-mern-5147c\",\r\n    storageBucket: \"whatsapp-mern-5147c.appspot.com\",\r\n    messagingSenderId: \"835808404126\",\r\n    appId: \"1:835808404126:web:5426a279b61d6a98b4118f\"\r\n  };\r\n\r\n  const firebaseApp = firebase.initializeApp(firebaseConfig)\r\n  const db = firebaseApp.firestore()\r\n  const auth = firebase.auth()\r\n  const provider = new firebase.auth.GoogleAuthProvider()\r\n\r\n\r\n  export {auth, provider}\r\n  export default db","export const initialState = {user:null}\r\n\r\nexport const actionTypes ={\r\n    SET_USER:\"SET_USER\"\r\n}\r\n\r\nconst reducer = (state,action) => {\r\nconsole.log(action)\r\nswitch(action.type){\r\n    case actionTypes.SET_USER:\r\n        return {\r\n            ...state,\r\n            user:action.user\r\n        }\r\n        default:\r\n            return state\r\n}\r\n\r\n}\r\n\r\nexport default reducer","import React, { useState } from 'react'\r\nimport {Button} from '@material-ui/core'\r\nimport './Login.css'\r\nimport {auth,provider} from '../firebase'\r\nimport { actionTypes } from './reducer'\r\nimport { useStateValue } from './StateProvider'\r\n\r\n\r\n\r\nconst Login = () => {\r\n    const [{}, dispatch] = useStateValue()\r\n    const siginIn = () => {\r\n\r\n   auth.signInWithPopup(provider)\r\n   .then(result => {\r\n       dispatch ({\r\n           type:actionTypes.SET_USER,\r\n           user: result.user\r\n       })\r\n   })\r\n    .catch(error => alert(error.message))\r\n    }\r\n\r\n\r\n    return (\r\n        <div className='login'>\r\n        <div className='login_container'>\r\n          <img src = \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/800px-WhatsApp.svg.png\" alt ='whatsapp'/>\r\n          <div className='login_text'>\r\n              <h1>Sign in to Whatsapp</h1>\r\n          </div>\r\n         <Button onClick={siginIn}>SignIn with Google</Button>\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Login","\nimport { useEffect, useState } from 'react';\nimport './App.css';\nimport Chat from './components/Chat';\nimport Sidebar from './components/Sidebar';\nimport Pusher from 'pusher-js'\nimport axios from './components/axios';\nimport Login from './components/Login'\nimport { useStateValue } from './components/StateProvider';\n\n\nfunction App() {\n\nconst [messages,setMessages] = useState([])\nconst [{user}, dispatch]= useStateValue()\n\nuseEffect(() => {\n axios.get(\"/messages/sync\").then(res => setMessages(res.data))\n}, [])\n\n\n\n\nuseEffect(() =>{\n\n  const pusher = new Pusher('7e06f9acc763c9eb3539', {\n    cluster: 'ap2'\n  });\n\n  const channel = pusher.subscribe('messages');\n  channel.bind('inserted', (data) => {\n   setMessages([...messages,data])\n  });\n\nreturn () => {\n  channel.unbind_all()\n  channel.unsubscribe()\n}\n\n},[messages])\n\nconsole.log(messages)\n\n  return (\n    <div className=\"app\">\n    \n      { !user ? <Login/> : (\n        <div className=\"app_body\">\n<Sidebar  messages={messages}/>\n<Chat messages={messages} />\n\n    </div>\n\n      )\n        \n      }\n\n\n</div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { StateProvider } from './components/StateProvider';\nimport reducer, {initialState} from './components/reducer'\n\nReactDOM.render(\n  <React.StrictMode>\n    <StateProvider initialState={initialState} reducer={reducer}>\n    <App />\n    </StateProvider>\n\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}